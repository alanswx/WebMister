var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";var e={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},t=!("onscroll"in window)||/glebot/.test(navigator.userAgent),o=function(e,t){e&&e(t)},n=function(e){return e.getBoundingClientRect().top+window.pageYOffset-e.ownerDocument.documentElement.clientTop},i=function(e){return e.getBoundingClientRect().left+window.pageXOffset-e.ownerDocument.documentElement.clientLeft},s=function(e,t,o){return!(u=e,h=t,_=o,(h===window?window.innerHeight+window.pageYOffset:n(h)+h.offsetHeight)<=n(u)-_||(a=e,c=t,d=o,(c===window?window.pageYOffset:n(c))>=n(a)+d+a.offsetHeight)||function(e,t,o){var n=window.innerWidth;return(t===window?n+window.pageXOffset:i(t)+n)<=i(e)-o}(e,t,o)||(s=e,r=t,l=o,(r===window?window.pageXOffset:i(r))>=i(s)+l+s.offsetWidth));var s,r,l,a,c,d,u,h,_},r=function(e,t){var o=new e(t),n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}});window.dispatchEvent(n)},l=function(e,t,o){var n=e.tagName,i=a(e,o);if("IMG"===n){!function(e,t){var o=e.parentElement;if("PICTURE"===o.tagName)for(var n=0;n<o.children.length;n++){var i=o.children[n];if("SOURCE"===i.tagName){var s=a(i,t);s&&i.setAttribute("srcset",s)}}}(e,t);var s=a(e,t);return s&&e.setAttribute("srcset",s),void(i&&e.setAttribute("src",i))}"IFRAME"!==n?i&&(e.style.backgroundImage='url("'+i+'")'):i&&e.setAttribute("src",i)};function a(e,t){return window.jQuery?$(e).data(t):e.dataset[t]}function c(e,t){window.jQuery?$(e).removeClass(t):e.classList.remove(t)}function d(e,t){window.jQuery?$(e).addClass(t):e.classList.add(t)}var u=function(t){this._settings=_extends({},e,t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()};u.prototype={_reveal:function(e){var t=this._settings,n=function n(){t&&(e.removeEventListener("load",i),e.removeEventListener("error",n),c(e,t.class_loading),d(e,t.class_error),o(t.callback_error,e))},i=function i(){t&&(c(e,t.class_loading),d(e,t.class_loaded),e.removeEventListener("load",i),e.removeEventListener("error",n),o(t.callback_load,e))};"IMG"!==e.tagName&&"IFRAME"!==e.tagName||(e.addEventListener("load",i),e.addEventListener("error",n),d(e,t.class_loading)),l(e,t.data_srcset,t.data_src),o(t.callback_set,e)},_loopThroughElements:function(){var e=this._settings,n=this._elements,i=n?n.length:0,r=void 0,l=[],a=this._isFirstLoop;for(r=0;r<i;r++){var c=n[r];e.skip_invisible&&null===c.offsetParent||(t||s(c,e.container,e.threshold))&&(a&&d(c,e.class_initial),this._reveal(c),l.push(r),u=c,h="wasProcessed",_=!0,window.jQuery?$(u).data(h,_):u.dataset[h]=_)}for(var u,h,_;l.length;)n.splice(l.pop(),1),o(e.callback_processed,n.length);0===i&&this._stopScrollHandler(),a&&(this._isFirstLoop=!1)},_purgeElements:function(){var e=this._elements,t=e.length,o=void 0,n=[];for(o=0;o<t;o++){a(e[o],"wasProcessed")&&n.push(o)}for(;n.length>0;)e.splice(n.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var e=this._settings.throttle;if(0!==e){var t=Date.now(),o=e-(t-this._previousLoopTime);o<=0||o>e?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),o))}else this._loopThroughElements()},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}};var h=window.lazyLoadOptions;return h&&function(e,t){var o=t.length;if(o)for(var n=0;n<o;n++)r(e,t[n]);else r(e,t)}(u,h),u});