!function(t){"function"==typeof define&&define.amd?define(t):window.purl=t()}(function(){var t={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],e={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},n=/^[0-9]+$/;function o(t,r){if(0===t[r].length)return t[r]={};var e={};for(var a in t[r])e[a]=t[r][a];return t[r]=e,e}function i(t,r,e){if(~r.indexOf("]")){!function t(r,e,a,i){var s=r.shift();if(s){var u=e[a]=e[a]||[];"]"==s?f(u)?""!==i&&u.push(i):"object"==typeof u?u[function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}(u).length]=i:u=e[a]=[e[a],i]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!n.test(s)&&f(u)&&(u=o(e,a)),t(r,u,s,i)):(!n.test(s)&&f(u)&&(u=o(e,a)),t(r,u,s,i))}else f(e[a])?e[a].push(i):"object"==typeof e[a]?e[a]=i:void 0===e[a]?e[a]=i:e[a]=[e[a],i]}(r.split("["),t,"base",e)}else{if(!n.test(r)&&f(t.base)){var a={};for(var i in t.base)a[i]=t.base[i];t.base=a}""!==r&&function(t,r,e){var a=t[r];void 0===a?t[r]=e:f(a)?a.push(e):t[r]=[a,e]}(t.base,r,e)}return t}function s(t){return function(t,r){var e=0,a=t.length>>0,n=arguments[2];for(;e<a;)e in t&&(n=r.call(void 0,n,t[e],e,t)),++e;return n}(String(t).split(/&|;/),function(t,r){try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}var e=r.indexOf("="),a=function(t){for(var r,e,a=t.length,n=0;n<a;++n)if("]"==(e=t[n])&&(r=!1),"["==e&&(r=!0),"="==e&&!r)return n}(r),n=r.substr(0,a||e),o=r.substr(a||e,r.length);return o=o.substr(o.indexOf("=")+1,o.length),""===n&&(n=r,o=""),i(t,n,o)},{base:{}}).base}function f(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t,n){return 1===arguments.length&&!0===t&&(n=!0,t=void 0),n=n||!1,{data:function(t,e){for(var n=decodeURI(t),o=a[e?"strict":"loose"].exec(n),i={attr:{},param:{},seg:{}},f=14;f--;)i.attr[r[f]]=o[f]||"";return i.param.query=s(i.attr.query),i.param.fragment=s(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}(t=t||window.location.toString(),n),attr:function(t){return void 0!==(t=e[t]||t)?this.data.attr[t]:this.data.attr},param:function(t){return void 0!==t?this.data.param.query[t]:this.data.param.query},fparam:function(t){return void 0!==t?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return void 0===t?this.data.seg.path:(t=t<0?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return void 0===t?this.data.seg.fragment:(t=t<0?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}}return u.jQuery=function(r){null!=r&&(r.fn.url=function(e){var a="";return this.length&&(a=r(this).attr(function(r){var e=r.tagName;return void 0!==e?t[e.toLowerCase()]:e}(this[0]))||""),u(a,e)},r.url=u)},u.jQuery(window.jQuery),u});